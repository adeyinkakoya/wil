!function(){"use strict";var c,o,a;c=jQuery,o=document.getElementById("wiloke-lineicon-popup"),a=c("#wiloke-lineicon-popup"),c(document).ready(function(){c(".menu .item").tab(),c(".ui.checkbox").checkbox(),c(".ui.dropdown:not(.no-js)").dropdown(),c(".semantic-tabs .item").tab();var e=c(".wilcity-color-picker");c.fn.spectrum&&e.length&&e.each(function(){var t=this;c(this).spectrum({showAlpha:!0,change:function(e){c(t).trigger("change")}})});var n=null,i=null;document.createEvent("Event").initEvent("click",!0,!1),document.querySelectorAll(".wiloke-form-has-icon").forEach(function(e){e.addEventListener("click",function(e){if(e.target&&"wil-icon-box"!==e.target.className&&"wil-icon-box"!==e.target.parentElement.className)return!1;n="wil-icon-box"===e.target.className?(i=e.target.querySelector("i"),e.target.nextElementSibling.querySelector(".wiloke-icon")):(i=e.target,e.target.parentElement.nextElementSibling.querySelector(".wiloke-icon")),i.classList.add("heartbeat"),new Promise(function(t,e){null===o.getAttribute("loadedicon")?jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"wiloke_load_line_icon"},success:function(e){document.getElementById("wiloke-icon-content").innerHTML=e.data,o.setAttribute("loadedicon",!0),t("success")}}):t("success")}).then(function(){i.classList.remove("heartbeat");var e=a.modal("show",{duration:0});a.on("onChangedIcon",function(e,t){n.value=t,i.setAttribute("class",t),function(e,t){var n;if(!document.createEventObject)return(n=document.createEvent("HTMLEvents")).initEvent(t,!0,!0),e.dispatchEvent(n);n=document.createEventObject(),e.fireEvent(t,n)}(n,"update-icon")}),function(n){if(a.length&&!a.data("addedScript")){var e="";document.getElementById("wiloke-search-icon").addEventListener("keyup",function(){(e=document.getElementById("wiloke-search-icon").value.toLowerCase()).length?(a.find(".wil-icon").addClass("hidden"),a.find('[class*="'+e+'"]').closest(".wil-icon").removeClass("hidden")):a.find(".wil-icon").removeClass("hidden")}),a.data("addedScript",!0),a.find(".wil-icon").on("click",function(e){e.preventDefault();var t=c(this).find("i").attr("class");a.trigger("onChangedIcon",[t]),n.modal("hide")})}}(e)})})})})}();
